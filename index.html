<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gritte - Your Personalized Learning Journey</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' rx='20' fill='%236366F1'></rect><text y='.9em' x='50%' text-anchor='middle' font-size='90' fill='white' font-family='Inter,sans-serif'>G</text></svg>">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800&family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body {
            font-family: 'Inter', 'Noto Sans SC', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        .hero-gradient {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        }
        html.dark .hero-gradient {
             background: oklch(27.8% 0.033 256.848);
        }
        .section-fade-in {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .section-fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }
        .lang-btn.active {
            color: #ffffff;
            background-color: #4f46e5;
        }
        /* Gradient text for the brand name */
        .gritte-gradient {
            background: linear-gradient(45deg, #6366F1, #8B5CF6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-fill-color: transparent;
        }
        /* Style for the colored underline */
        .highlight-underline {
            text-decoration: underline;
            text-decoration-color: #8B5CF6; /* A purple/indigo color from the gradient */
            text-decoration-thickness: 2px;
            text-underline-offset: 4px;
        }
    </style>
    <script>
        // Set theme on initial load to prevent flash of wrong theme
        if (localStorage.getItem('theme') === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
        } else {
            document.documentElement.classList.remove('dark');
        }
        // Tailwind config for dark mode
        tailwind.config = {
            darkMode: 'class',
        }
    </script>
</head>
<body class="bg-white text-gray-800 dark:bg-black dark:text-gray-300 transition-colors duration-300">

    <!-- Header -->
    <header id="header" class="bg-white/80 backdrop-blur-lg dark:bg-gray-800/80 fixed top-0 left-0 right-0 z-50 shadow-sm">
        <div class="container mx-auto px-6 py-3 flex justify-between items-center">
            <a href="#" class="text-2xl font-extrabold gritte-gradient">Gritte.</a>
            <div class="flex items-center">
                <nav class="hidden md:flex space-x-8 mr-6">
                    <a href="#philosophy" class="text-gray-600 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-white transition" data-key="nav_philosophy">Our Philosophy</a>
                    <a href="#journey" class="text-gray-600 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-white transition" data-key="nav_journey">The Journey</a>
                    <a href="#is-this-for-you" class="text-gray-600 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-white transition" data-key="nav_is_this_for_you">Is This For You?</a>
                </nav>
                
                <!-- Language Switcher -->
                <div class="flex items-center space-x-1 border border-gray-300 dark:border-gray-600 rounded-full p-1">
                    <button id="lang-en" class="lang-btn text-sm font-medium px-3 py-1 rounded-full transition-colors" data-lang="en">EN</button>
                    <button id="lang-zh" class="lang-btn text-sm font-medium px-3 py-1 rounded-full transition-colors" data-lang="zh">中文</button>
                </div>

                <!-- Dark Mode Toggle -->
                <button id="theme-toggle" class="ml-4 text-gray-600 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-white transition-colors">
                    <i data-lucide="sun" class="w-5 h-5 hidden" id="theme-toggle-sun"></i>
                    <i data-lucide="moon" class="w-5 h-5 hidden" id="theme-toggle-moon"></i>
                </button>

                <a href="#contact" class="hidden lg:inline-block bg-indigo-600 text-white font-bold py-2 px-5 rounded-lg hover:bg-indigo-700 transition-transform transform hover:scale-105 ml-4" data-key="nav_begin_journey">
                    Begin Your Journey
                </a>
                <button id="mobile-menu-button" class="md:hidden ml-4">
                    <i data-lucide="menu"></i>
                </button>
            </div>
        </div>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden px-6 pb-4 space-y-4">
            <a href="#philosophy" class="block text-gray-600 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-white transition" data-key="nav_philosophy_mobile">Our Philosophy</a>
            <a href="#journey" class="block text-gray-600 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-white transition" data-key="nav_journey_mobile">The Journey</a>
            <a href="#is-this-for-you" class="block text-gray-600 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-white transition" data-key="nav_is_this_for_you_mobile">Is This For You?</a>
            <a href="#contact" class="block w-full text-center bg-indigo-600 text-white font-bold py-2 px-5 rounded-lg hover:bg-indigo-700 transition" data-key="nav_begin_journey_mobile">
                Begin Your Journey
            </a>
        </div>
    </header>

    <main>
        <!-- Hero Section -->
        <section class="hero-gradient pt-32 pb-20 md:pt-48 md:pb-32 text-center dark:bg-gray-800">
            <div class="container mx-auto px-6">
                <h1 class="text-4xl md:text-6xl font-extrabold text-gray-900 dark:text-white leading-tight mb-4" data-key="hero_title">Master the Art of Learning</h1>
                <p class="text-lg md:text-xl text-gray-600 dark:text-gray-300 max-w-3xl mx-auto mb-8" data-key="hero_subtitle">A 30-day guided journey to develop your meta-cognitive abilities. We don't teach you what to think—we help you transform how you think.</p>
                <a href="#contact" class="bg-indigo-600 text-white font-bold py-4 px-8 rounded-lg hover:bg-indigo-700 transition-transform transform hover:scale-105 inline-block shadow-lg" data-key="hero_cta">
                    Schedule a Free Consultation
                </a>
            </div>
        </section>

        <!-- Philosophy Section -->
        <section id="philosophy" class="py-20 md:py-28 bg-white dark:bg-gray-800">
            <div class="container mx-auto px-6 text-center section-fade-in">
                <h2 class="text-3xl md:text-4xl font-bold mb-4 dark:text-white" data-key="philosophy_title">A Learning Experience About You, For You.</h2>
                <p class="text-lg text-gray-600 dark:text-gray-400 max-w-3xl mx-auto mb-16" data-key="philosophy_subtitle">Forget one-size-fits-all curricula. Our methodology is built on three core principles designed for a truly personalized learning experience.</p>
                <div class="grid md:grid-cols-3 gap-12">
                    <!-- Pillar 1 -->
                    <div>
                        <div class="flex flex-col items-center">
                            <div class="bg-blue-100 text-blue-600 dark:bg-blue-900/50 dark:text-blue-400 rounded-full p-4 mb-4"><i data-lucide="sparkles" class="w-8 h-8"></i></div>
                            <h3 class="text-xl font-bold mb-2 dark:text-white" data-key="pillar1_title">Your Experience is the Curriculum</h3>
                            <p class="text-gray-600 dark:text-gray-400" data-key="pillar1_desc">We use your questions, projects, and challenges as the source material. Learning is built from your lived experience, making every insight relevant and immediately applicable.</p>
                        </div>
                    </div>
                    <!-- Pillar 2 -->
                    <div>
                        <div class="flex flex-col items-center">
                            <div class="bg-orange-100 text-orange-600 dark:bg-orange-900/50 dark:text-orange-400 rounded-full p-4 mb-4"><i data-lucide="book-heart" class="w-8 h-8"></i></div>
                            <h3 class="text-xl font-bold mb-2 dark:text-white" data-key="pillar2_title">A Safe Space for Deep Learning</h3>
                            <p class="text-gray-600 dark:text-gray-400" data-key="pillar2_desc">Your private journal is a confidential workshop for your thoughts—a "transitional space" to connect ideas and refine your thinking process without pressure or judgment.</p>
                        </div>
                    </div>
                    <!-- Pillar 3 -->
                    <div>
                        <div class="flex flex-col items-center">
                            <div class="bg-teal-100 text-teal-600 dark:bg-teal-900/50 dark:text-teal-400 rounded-full p-4 mb-4"><i data-lucide="shield-check" class="w-8 h-8"></i></div>
                            <h3 class="text-xl font-bold mb-2 dark:text-white" data-key="pillar3_title">Guidance Without Overwhelm</h3>
                            <p class="text-gray-600 dark:text-gray-400" data-key="pillar3_desc">Our experts act as your shield and backbone. They do the heavy lifting behind the scenes, distilling complex concepts into simple, gentle, and actionable guidance.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- The Journey Section -->
        <section id="journey" class="py-20 md:py-28 bg-gray-50 dark:bg-gray-800">
            <div class="container mx-auto px-6 section-fade-in">
                <div class="text-center mb-16">
                    <h2 class="text-3xl md:text-4xl font-bold mb-4 dark:text-white" data-key="journey_title">Your 30-Day Learning Journey</h2>
                    <p class="text-lg text-gray-600 dark:text-gray-400 max-w-3xl mx-auto" data-key="journey_subtitle">A carefully designed rhythm of work and rest to support deep reflection and sustainable intellectual growth.</p>
                </div>
                <div class="relative max-w-4xl mx-auto">
                    <div class="absolute left-1/2 top-0 h-full w-0.5 bg-indigo-200 dark:bg-gray-800 hidden md:block"></div>
                    <div class="md:flex items-center mb-12">
                        <div class="md:w-1/2 md:pr-8"><h3 class="text-2xl font-bold mb-2 dark:text-white" data-key="step1_title">1. Guided Journaling</h3><p class="text-gray-600 dark:text-gray-400" data-key="step1_desc">Begin with free-writing to explore your learning challenges, gradually moving to tailored prompts that help you focus on emerging concepts and refine your learning process.</p></div>
                        <div class="md:w-1/2 md:pl-8 mt-4 md:mt-0 flex justify-center"><div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md w-full md:w-auto"><i data-lucide="feather" class="w-16 h-16 text-indigo-600 dark:text-indigo-400 mx-auto"></i></div></div>
                    </div>
                    <div class="md:flex flex-row-reverse items-center mb-12">
                        <div class="md:w-1/2 md:pl-8"><h3 class="text-2xl font-bold mb-2 dark:text-white" data-key="step2_title">2. Expert Consultation</h3><p class="text-gray-600 dark:text-gray-400" data-key="step2_desc">Four private, one-on-one calls are scheduled at key moments. These are deep-dive sessions to discuss your progress, overcome learning blocks, and refine your understanding.</p></div>
                        <div class="md:w-1/2 md:pr-8 mt-4 md:mt-0 flex justify-center"><div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md w-full md:w-auto"><i data-lucide="users" class="w-16 h-16 text-indigo-600 dark:text-indigo-400 mx-auto"></i></div></div>
                    </div>
                    <div class="md:flex items-center">
                        <div class="md:w-1/2 md:pr-8"><h3 class="text-2xl font-bold mb-2 dark:text-white" data-key="step3_title">3. Integrated Breaks</h3><p class="text-gray-600 dark:text-gray-400" data-key="step3_desc">True understanding requires rest. With eight scheduled break days, you have time to process insights, recharge, and let your new awareness settle without feeling rushed.</p></div>
                        <div class="md:w-1/2 md:pl-8 mt-4 md:mt-0 flex justify-center"><div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md w-full md:w-auto"><i data-lucide="coffee" class="w-16 h-16 text-indigo-600 dark:text-indigo-400 mx-auto"></i></div></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Is This For You? Section -->
        <section id="is-this-for-you" class="py-20 md:py-28 bg-white dark:bg-gray-800">
            <div class="container mx-auto px-6 section-fade-in">
                <div class="md:flex items-center">
                    <div class="md:w-1/2 md:pr-12">
                        <h2 class="text-3xl md:text-4xl font-bold mb-4 dark:text-white" data-key="for_you_title">Is Gritte For You?</h2>
                        <p class="text-lg text-gray-600 dark:text-gray-400 mb-8" data-key="for_you_subtitle">This journey is for learners ready to move beyond memorization and engage in a deep, meaningful process of improving how they learn. It's for you if...</p>
                        <ul class="space-y-4">
                            <li class="flex items-start"><i data-lucide="check-circle-2" class="w-6 h-6 text-green-500 dark:text-green-400 mr-3 mt-1 flex-shrink-0"></i><span data-key="for_you_point1">You're facing a complex subject and traditional study methods aren't working.</span></li>
                            <li class="flex items-start"><i data-lucide="check-circle-2" class="w-6 h-6 text-green-500 dark:text-green-400 mr-3 mt-1 flex-shrink-0"></i><span data-key="for_you_point2">You want to develop a robust framework for thinking, not just collect disconnected facts.</span></li>
                            <li class="flex items-start"><i data-lucide="check-circle-2" class="w-6 h-6 text-green-500 dark:text-green-400 mr-3 mt-1 flex-shrink-0"></i><span data-key="for_you_point3">You are a researcher, student, or professional seeking to overcome a learning plateau.</span></li>
                            <li class="flex items-start"><i data-lucide="check-circle-2" class="w-6 h-6 text-green-500 dark:text-green-400 mr-3 mt-1 flex-shrink-0"></i><span data-key="for_you_point4">You believe the deepest learning comes from improving your own thinking process.</span></li>
                        </ul>
                    </div>
                    <div class="md:w-1/2 mt-12 md:mt-0">
                        <div class="bg-gray-100 dark:bg-gray-800 p-8 rounded-lg shadow-lg">
                            <h3 class="text-xl font-bold mb-4 dark:text-white" data-key="testimonial_text">"This was completely transformative for my PhD research. I moved past a major block by learning how to structure my own inquiry. It's more than a course; it's learning how to think."</h3>
                            <p class="font-semibold text-gray-700 dark:text-gray-300" data-key="testimonial_author">- Dr. J. Chen, Program Graduate</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="py-20 md:py-32 hero-gradient dark:bg-gray-800">
            <div class="container mx-auto px-6 text-center section-fade-in">
                <h2 class="text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-4" data-key="contact_title">Ready to transform your learning?</h2>
                <p class="text-lg text-gray-600 dark:text-gray-300 max-w-2xl mx-auto mb-8" data-key="contact_subtitle">Your journey begins with a single step. Schedule a complimentary, no-obligation exploratory call with one of our guides to learn more and see if Gritte is the right fit for your learning goals.</p>
                <a href="mailto:hello@gritte.com" class="bg-gray-900 text-white dark:bg-white dark:text-gray-900 font-bold py-4 px-8 rounded-lg hover:bg-black dark:hover:bg-gray-200 transition-transform transform hover:scale-105 inline-block shadow-lg" data-key="contact_cta">
                    Schedule Your Free Consultation
                </a>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 dark:bg-gray-900 text-white py-8">
        <div class="container mx-auto px-6 text-center">
            <p class="font-bold text-lg gritte-gradient">Gritte.</p>
            <p class="text-gray-400 text-sm mt-2" data-key="footer_text">&copy; 2025 Gritte Personalized Learning. All Rights Reserved.</p>
        </div>
    </footer>

    <script>
        // This script runs after the DOM is fully loaded
        document.addEventListener('DOMContentLoaded', () => {
            console.log("DOM fully loaded and parsed.");
            
            // --- Translations Object ---
            const translations = {
                en: {
                    nav_philosophy: "Our Philosophy",
                    nav_journey: "The Journey",
                    nav_is_this_for_you: "Is This For You?",
                    nav_begin_journey: "Begin Your Journey",
                    nav_philosophy_mobile: "Our Philosophy",
                    nav_journey_mobile: "The Journey",
                    nav_is_this_for_you_mobile: "Is This For You?",
                    nav_begin_journey_mobile: "Begin Your Journey",
                    hero_title: "Master the Art of Learning",
                    hero_subtitle: "A 30-day guided journey to develop your meta-cognitive abilities. We don't teach you <span class='highlight-underline'>what</span> to think—we help you transform <span class='highlight-underline'>how</span> you think.",
                    hero_cta: "Schedule a Free Consultation",
                    philosophy_title: "A Learning Experience About You, For You",
                    philosophy_subtitle: "Forget one-size-fits-all curricula. Our methodology is built on three core principles designed for a truly personalized learning experience.",
                    pillar1_title: "Your Experience is the Curriculum",
                    pillar1_desc: "We use your questions, projects, and challenges as the source material. Learning is built from your lived experience, making every insight relevant and immediately applicable.",
                    pillar2_title: "A Safe Space for Deep Learning",
                    pillar2_desc: "Your private journal is a confidential workshop for your thoughts—a 'transitional space' to connect ideas and refine your thinking process without pressure or judgment.",
                    pillar3_title: "Guidance Without Overwhelm",
                    pillar3_desc: "Our experts act as your shield and backbone. They do the heavy lifting behind the scenes, distilling complex concepts into simple, gentle, and actionable guidance.",
                    journey_title: "Your 30-Day Learning Journey",
                    journey_subtitle: "A carefully designed rhythm of work and rest to support deep reflection and sustainable intellectual growth.",
                    step1_title: "1. Guided Journaling",
                    step1_desc: "Begin with free-writing to explore your learning challenges, gradually moving to tailored prompts that help you focus on emerging concepts and refine your learning process.",
                    step2_title: "2. Expert Consultation",
                    step2_desc: "Four private, one-on-one calls are scheduled at key moments. These are deep-dive sessions to discuss your progress, overcome learning blocks, and refine your understanding.",
                    step3_title: "3. Integrated Breaks",
                    step3_desc: "True understanding requires rest. With eight scheduled break days, you have time to process insights, recharge, and let your new awareness settle without feeling rushed.",
                    for_you_title: "Is Gritte For You?",
                    for_you_subtitle: "This journey is for learners ready to move beyond memorization and engage in a deep, meaningful process of improving how they learn. It's for you if...",
                    for_you_point1: "You're facing a complex subject and traditional study methods aren't working.",
                    for_you_point2: "You want to develop a robust framework for thinking, not just collect disconnected facts.",
                    for_you_point3: "You are a researcher, student, or professional seeking to overcome a learning plateau.",
                    for_you_point4: "You believe the deepest learning comes from improving your own thinking process.",
                    testimonial_text: "\"This was completely transformative for my PhD research. I moved past a major block by learning how to structure my own inquiry. It's more than a course; it's learning how to think.\"",
                    testimonial_author: "- Dr. J. Chen, Program Graduate",
                    contact_title: "Ready to transform your learning?",
                    contact_subtitle: "Your journey begins with a single step. Schedule a complimentary, no-obligation exploratory call with one of our guides to learn more and see if Gritte is the right fit for your learning goals.",
                    contact_cta: "Schedule Your Free Consultation",
                    footer_text: "&copy; 2025 Gritte Personalized Learning. All Rights Reserved."
                },
                zh: {
                    nav_philosophy: "我们的理念",
                    nav_journey: "学习之旅",
                    nav_is_this_for_you: "适合你吗?",
                    nav_begin_journey: "开启学习之旅",
                    nav_philosophy_mobile: "我们的理念",
                    nav_journey_mobile: "学习之旅",
                    nav_is_this_for_you_mobile: "适合你吗?",
                    nav_begin_journey_mobile: "开启学习之旅",
                    hero_title: "掌握学习的艺术",
                    hero_subtitle: "一场为期30天的引导式旅程，旨在发展你的元认知能力。我们不教你<span class='highlight-underline'>思考什么</span>——我们助你升级你的<span class='highlight-underline'>思考之道</span>。",
                    hero_cta: "预约免费咨询",
                    philosophy_title: "一场真正为你而设的个性化学习体验升级旅程",
                    philosophy_subtitle: "告别千篇一律。我们的方法建立在三个核心原则之上，旨在创造真正个性化的学习体验。",
                    pillar1_title: "你的经验是课程",
                    pillar1_desc: "我们将你的问题、项目和挑战作为学习的原始素材。知识从你的亲身经历中生长出来，让每一个见解都与你息息相关。",
                    pillar2_title: "一个安全的深度学习空间",
                    pillar2_desc: "你的日志是一个思想的秘密工坊——一个“过渡空间”，让你在没有压力或评判的情况下，连接思想，并精进你的思维过程。",
                    pillar3_title: "无负担的专业指导",
                    pillar3_desc: "我们的专家是你的后盾和护盾。他们在幕后进行繁复的分析工作，将复杂的概念提炼成简单、温和且可操作的指导。",
                    journey_title: "你的30天学习之旅",
                    journey_subtitle: "一个精心设计的工作与休息节奏，以支持深度反思和可持续的智识成长。",
                    step1_title: "1. 引导式日记",
                    step1_desc: "从自由书写开始，探索你的学习挑战，然后逐步转向定制化提示，帮助你专注于浮现的概念，并优化你的学习过程。",
                    step2_title: "2. 专家咨询",
                    step2_desc: "在关键时刻安排四次私人多对一通话。这些是深度交流的会议，用于讨论你的进展，克服学习障碍，并精进你的理解。",
                    step3_title: "3. 整合性休息",
                    step3_desc: "真正的理解需要休息。通过八个计划好的休息日，你有足够的时间来消化见解，充电，并让你新的认知沉淀下来。",
                    for_you_title: "Gritte适合你吗？",
                    for_you_subtitle: "这个旅程专为准备好超越死记硬背，并希望进行深度、有意义的、关于如何学习的探索过程的学习者而设计。如果你...",
                    for_you_point1: "正面对一个复杂的学科，而传统的学习方法效果不佳。",
                    for_you_point2: "希望建立一个强大的思维框架，而不仅仅是收集零散的知识点。",
                    for_you_point3: "是一名希望突破学习瓶颈的研究者、学生或专业人士。",
                    for_you_point4: "相信最深刻的学习，源于优化自身的思维过程。",
                    testimonial_text: "“这次体验彻底改变了我的博士研究。通过学习如何构建我自己的探究路径，我突破了一个重大的瓶颈。这不仅是一门课程，更是学习如何思考。”",
                    testimonial_author: "- 陈博士, 项目毕业生",
                    contact_title: "准备好转变你的学习方式了吗？",
                    contact_subtitle: "你的旅程始于第一步。与我们的导师安排一次免费、无义务的探索性通话，以了解更多信息，看看Gritte是否适合你的学习目标。",
                    contact_cta: "预约免费咨询",
                    footer_text: "&copy; 2025 Gritte 个性化学习。版权所有。"
                }
            };

            // --- Get all necessary DOM elements ---
            const themeToggleBtn = document.getElementById('theme-toggle');
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            const langButtons = document.querySelectorAll('.lang-btn');
            const sections = document.querySelectorAll('.section-fade-in');

            // --- Language Switching Logic ---
            const setLanguage = (lang) => {
                console.log(`Setting language to: ${lang}`);
                document.querySelectorAll('[data-key]').forEach(elem => {
                    const key = elem.getAttribute('data-key');
                    if (translations[lang] && translations[lang][key]) {
                        elem.innerHTML = translations[lang][key];
                    }
                });
                document.documentElement.lang = lang;
                localStorage.setItem('gritte-lang', lang);

                // Update active language button style
                document.getElementById('lang-en').classList.toggle('active', lang === 'en');
                document.getElementById('lang-zh').classList.toggle('active', lang === 'zh');
                console.log("Language UI updated.");
            };

            // --- Dark Mode Logic ---
            const applyTheme = (theme) => {
                const sunIcon = document.getElementById('theme-toggle-sun');
                const moonIcon = document.getElementById('theme-toggle-moon');

                if (theme === 'dark') {
                    document.documentElement.classList.add('dark');
                    sunIcon.classList.remove('hidden');
                    moonIcon.classList.add('hidden');
                } else {
                    document.documentElement.classList.remove('dark');
                    sunIcon.classList.add('hidden');
                    moonIcon.classList.remove('hidden');
                }
                console.log(`Theme applied: ${theme}`);
            };

            themeToggleBtn.addEventListener('click', () => {
                const isDark = document.documentElement.classList.contains('dark');
                const newTheme = isDark ? 'light' : 'dark';
                localStorage.setItem('theme', newTheme);
                applyTheme(newTheme);
                console.log(`Theme toggled to: ${newTheme}`);
            });

            // --- Initial Setup Calls ---
            
            // 1. Activate Lucide Icons
            lucide.createIcons();
            console.log("Lucide icons initialized.");
            
            // 2. Set Initial Theme
            const savedTheme = localStorage.getItem('theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            const initialTheme = savedTheme || (prefersDark ? 'dark' : 'light');
            applyTheme(initialTheme);
            console.log(`Initial theme check: saved='${savedTheme}', prefersDark='${prefersDark}', setting to '${initialTheme}'`);

            // 3. Setup Language Buttons
            langButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const lang = button.getAttribute('data-lang');
                    console.log(`Language button clicked: ${lang}`);
                    setLanguage(lang);
                });
            });

            // 4. Set Initial Language
            const savedLang = localStorage.getItem('gritte-lang');
            const browserLang = navigator.language.startsWith('zh') ? 'zh' : 'en';
            const initialLang = savedLang || browserLang;
            setLanguage(initialLang);
            console.log(`Initial language check: saved='${savedLang}', browser='${browserLang}', setting to '${initialLang}'`);

            // 5. Setup Mobile Menu
            mobileMenuButton.addEventListener('click', () => {
                console.log("Mobile menu button clicked.");
                mobileMenu.classList.toggle('hidden');
            });

            // 6. Setup Smooth Scrolling
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href');
                    console.log(`Scrolling to ${targetId}`);
                    document.querySelector(targetId).scrollIntoView({
                        behavior: 'smooth'
                    });
                    if (!mobileMenu.classList.contains('hidden')) {
                        mobileMenu.classList.add('hidden');
                    }
                });
            });

            // 7. Setup Scroll-based Animations
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        console.log(`Section ${entry.target.id || 'element'} is intersecting, adding 'visible' class.`);
                        entry.target.classList.add('visible');
                    }
                });
            }, {
                threshold: 0.1 
            });
            sections.forEach(section => {
                observer.observe(section);
            });
            console.log("Intersection observer set up for fade-in sections.");
        });
    </script>
</body>
</html>
